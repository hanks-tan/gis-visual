(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],p=0,h=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={index:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("b635")},"0a62":function(t,e,a){},2395:function(t,e,a){},"275b":function(t,e,a){},"2a3a":function(t,e,a){"use strict";var n=a("3040"),i=a.n(n);i.a},3040:function(t,e,a){},3575:function(t,e,a){"use strict";var n=a("0a62"),i=a.n(n);i.a},"45fb":function(t,e,a){"use strict";var n=a("9f59"),i=a.n(n);i.a},"7c55":function(t,e,a){"use strict";var n=a("2395"),i=a.n(n);i.a},9332:function(t,e,a){"use strict";var n=a("275b"),i=a.n(n);i.a},"9f59":function(t,e,a){},b635:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("a026"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-inverse",attrs:{role:"navigation"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"navbar-header"},[t._m(0),a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("GIS可视化展示")])],1),a("div",{staticClass:"collapse navbar-collapse"},[a("ul",{staticClass:"nav navbar-nav"},[a("li",{staticClass:"dropdown"},[t._m(1),a("ul",{staticClass:"dropdown-menu"},t._l(t.app_ol,(function(e){return a("li",{key:e.name},[a("router-link",{attrs:{to:e.path}},[t._v(t._s(e.title))])],1)})),0)]),t._m(2),t._m(3),t._m(4),t._m(5)])])])]),a("div",{staticClass:"map-container"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#bs-example-navbar-collapse-1","aria-expanded":"false"}},[a("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[t._v(" Openlayers "),a("b",{staticClass:"caret"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"#"}},[t._v("Leaflet")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[t._v(" Echarts "),a("b",{staticClass:"caret"})]),a("ul",{staticClass:"dropdown-menu"},[a("li",[a("a",{attrs:{href:"#"}},[t._v("全国空气质量")])]),a("li",[a("a",{attrs:{href:"#"}},[t._v("EJB")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"/src/my_work/photo.html"}},[t._v("图片展示")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"#"}},[t._v("关于作者")])])}],o=(a("4160"),a("c975"),a("b0c0"),a("159b"),a("8c4f")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("map-view",{ref:"mapview"})],1)},l=[],c=(a("d81d"),a("0d03"),a("d3b7"),a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mapview",attrs:{id:"map"}})}),u=[],p=a("a2c7"),h=a("5eee"),d=a("480c"),f=a("2ef1"),v={data:function(){return{view:void 0,map:void 0}},mounted:function(){this.initMap()},methods:{initMap:function(){console.log("in mapview components");var t=new d["a"]({source:new f["a"]({url:"https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}"})});this.view=new p["a"]({projection:"EPSG:4326",zoom:4,center:[114,32]}),this.map=new h["a"]({target:"map",view:this.view,layers:[t]})}}},m=v,b=(a("3575"),a("2877")),g=Object(b["a"])(m,c,u,!1,null,null,null),w=g.exports,y=a("3e6b"),_=a("5831"),C=a("a2e1"),O=a("0710"),x=a("6c77"),E=a("ce2c"),j=a("83a6"),$={data:function(){return{dataURL:this.BaseURL+"/china_city_aqi",view:void 0,map:void 0,colors:["67, 206 ,23","225, 215, 44","247, 45, 14","167, 19, 76"]}},components:{MapView:w},mounted:function(){this.init()},methods:{init:function(){var t=this;this.source=new _["a"];var e=new y["a"]({source:this.source,style:this.createStyle.bind(this)});this.view=new p["a"]({projection:"EPSG:4326",zoom:7,center:[106.192619,34.528267]}),this.map=this.$refs["mapview"].map,this.map.addLayer(e),this.map.setView(this.view),e.on("precompose",(function(t){var e=t.context;e.shadowColor="#fff",e.shadowBlur=5})),this.axios.get(this.dataURL).then((function(e){var a=(new C["a"]).readFeatures(e.data.result);t.source.addFeatures(a)}))},createStyle:function(t,e){var a=this.view.getZoomForResolution(e);if(a>5){var n=this.labelIsExist(t);return n?console.log("not..."):this.showLabel(t),null}return this.clearLabel(),new x["b"]({image:new E["a"]({radius:5,fill:new j["a"]({color:"rgb("+this.getColor(t.get("AQI"))+")"})})})},clearLabel:function(){var t=this,e=this.map.getOverlays();e.getLength()>0&&e.forEach((function(e){t.map.removeOverlay(e)}))},getColor:function(t){var e=Math.ceil(t*this.colors.length/300);return e<this.colors.length?this.colors[e-1]:this.colors(this.colors.length-1)},showLabel:function(t){var e=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div");e.appendChild(a),e.appendChild(n),e.className="ol-pop",e.id=t.ol_uid.toString(),a.className="ol-popup-value",n.className="ol-popup-name",a.innerText=t.get("AQI"),n.innerText=t.get("city");var i=this.getColor(t.get("AQI"));a.style.backgroundColor="rgba("+i+", 0.8)";var r=new O["a"]({element:e,position:t.getGeometry().getCoordinates(),stopEvent:!1,autoPan:!0,autoPanAnimation:{duration:250}});this.map.addOverlay(r)},labelIsExist:function(t){var e=t.ol_uid;return!!document.getElementById(e)}}},S=$,P=(a("45fb"),Object(b["a"])(S,s,l,!1,null,null,null)),M=P.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"input-group-btn"},t._l(t.buttons,(function(e,n){return a("button",{key:e.id,staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(a){return t.changeFilter(e.filterValue)}}},[t._v(t._s(e.name))])})),0),a("map-view",{ref:"mapview"})],1)},A=[],L=(a("4de4"),{data:function(){return{buttons:[{id:1,name:"反色",filterValue:"invert"},{id:2,name:"褐色",filterValue:"sepia"},{id:3,name:"灰度",filterValue:"grayscale"},{id:4,name:"复合滤镜",filterValue:"complex"},{id:5,name:"原色",filterValue:"none"}],filter:"",map:null}},mounted:function(){this.init()},components:{MapView:w},methods:{init:function(){this.map=this.$refs["mapview"].map;var t=this;this.map.on("precompose",(function(e){var a=e.context;a&&(a.filter=t.filter)}))},changeFilter:function(t){"none"!==t&&(t+="(100%)"),this.filter=t,this.map.render()}}}),I=L,T=Object(b["a"])(I,k,A,!1,null,null,null),V=T.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("map-view",{ref:"mapview"})],1)},B=[],D=(a("3ca3"),a("ddb0"),{data:function(){return{map:void 0}},mounted:function(){this.init()},components:{MapView:w},methods:{init:function(){var t=this;this.map=this.$refs.mapview.map,Promise.all(this.getData()),this.getData("/api/air").then((function(e){t.showKrigingMap(e)}))},getData:function(t){return this.axios.get(t).then((function(t){return t.data}))},showKrigingMap:function(t){}}}),F=D,q=Object(b["a"])(F,G,B,!1,null,null,null),z=q.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"map"}})},N=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visible?a("div",{staticClass:"overlay-container"},[a("div",{staticClass:"overlay-header"},[a("span",[t._v(t._s(t.name))])]),a("div",[t.overlay?a("chart",{staticClass:"chart-container",attrs:{source:t.chartData}}):t._e()],1)]):t._e()},J=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{ref:"chart",staticClass:"overlay-chart"})])},K=[],W=a("313e"),Z=a.n(W),H={data:function(){return{}},props:["source"],mounted:function(){this.chart=Z.a.init(this.$refs["chart"]),this.source&&this.drawChart(this.source)},methods:{drawChart:function(t){var e=Array.apply(null,{length:29}).map((function(t,e){return"2."+(e+1).toString()})),a={title:{text:"全国/湖北疫情趋势"},tooltip:{trigger:"axis"},legend:{data:["全国新增","湖北新增"]},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"全国新增",type:"line",data:t.quanguoTotal},{name:"湖北新增",type:"line",data:t.hubeiTotal}]};this.chart.setOption(a)}}},X=H,Y=(a("9332"),Object(b["a"])(X,Q,K,!1,null,"6ab23854",null)),tt=Y.exports,et={data:function(){return{visible:!1,name:"疫情趋势",overlay:void 0}},components:{chart:tt},methods:{show:function(){var t=new O["a"]({element:this.$mount().$el,stopEvent:!1,autoPanAnimation:{duration:250},position:this.position,positioning:"center-center",className:"point-overlay"});this.map.addOverlay(t),this.overlay=t,this.visible=!0},close:function(){this.visible=!1}}},at=et,nt=(a("2a3a"),Object(b["a"])(at,U,J,!1,null,null,null)),it=nt.exports,rt={add:{startDate:"2.1",endDate:"2.29",quanguoTotal:[2590,2829,3235,3887,3694,3151,3399,2653,3073,2484,2022,15153,5093,2644,2009,2051,1891,1751,825,892,399,649,416,517,411,440,329,430,579],hubeiTotal:[1921,2103,2345,3156,2987,2447,2841,2147,2618,2097,1638,14840,4823,2420,1843,1933,1807,1693,775,631,366,630,398,499,401,409,318,423,570]}},ot=rt,st=n["a"].extend(it),lt={data:function(){return{map:void 0,overlayChartObj:void 0,data:{}}},mounted:function(){this.init()},methods:{init:function(){var t=this,e=new d["a"]({source:new f["a"]({url:"https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}"})});this.map=new h["a"]({target:"map",layers:[e],view:new p["a"]({projection:"EPSG:4326",zoom:5,center:[114,32]})}),console.log(ot),this.map.on("click",(function(e){var a=ot.add;t.showOverlayChart(e.coordinate,a)}))},showOverlayChart:function(t,e){this.overlayChartObj&&(this.overlayChartObj.close(),this.overlayChartObj=null),this.overlayChartObj=this.createOverlay({position:t,data:e}),this.overlayChartObj.show()},createOverlay:function(t){var e=new st({data:{map:this.map,position:t.position,chartData:t.data}});return e}}},ct=lt,ut=Object(b["a"])(ct,R,N,!1,null,null,null),pt=ut.exports,ht=[{path:"/",name:"firstPage",component:null,meta:{title:"首页"}},{path:"/ol/air",name:"olAirPointMap",component:M,meta:{title:"空气质量散点图"}},{path:"/ol/css-filter",name:"cssFilter",component:V,meta:{title:"地图背景色切换"}},{path:"/ol/kriging",name:"kriging",component:z,meta:{title:"克里金插值"}},{path:"/ol/chart-map",name:"chart-map",component:pt,meta:{title:"新冠肺炎趋势图"}}],dt=new o["a"]({routes:ht});dt.beforeEach((function(t,e,a){document.title=t.meta.title+" | WebGIS之路",a()}));var ft=dt;n["a"].use(o["a"]);var vt={name:"app",data:function(){var t=this.getMenu("/ol/");return{app_ol:t}},router:ft,mounted:function(){},methods:{getMenu:function(t){var e=this.$router.options.routes,a=[];return e.forEach((function(e){e.path.indexOf(t)>-1&&a.push({name:e.name,title:e.meta.title,path:e.path})})),a}}},mt=vt,bt=(a("7c55"),Object(b["a"])(mt,i,r,!1,null,null,null)),gt=bt.exports,wt=(a("1b58"),a("bc3a")),yt=a.n(wt);n["a"].config.productionTip=!1,n["a"].prototype.axios=yt.a,n["a"].prototype.BaseURL="/api",new n["a"]({template:"<App/>",components:{App:gt}}).$mount("#app")}});
//# sourceMappingURL=index.dff1101b.js.map